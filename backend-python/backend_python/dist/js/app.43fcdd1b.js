(function(e){function t(t){for(var i,r,l=t[0],o=t[1],c=t[2],d=0,u=[];d<l.length;d++)r=l[d],s[r]&&u.push(s[r][0]),s[r]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i]);p&&p(t);while(u.length)u.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],i=!0,l=1;l<a.length;l++){var o=a[l];0!==s[o]&&(i=!1)}i&&(n.splice(t--,1),e=r(r.s=a[0]))}return e}var i={},s={app:0},n=[];function r(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=i,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/hermes/static/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var p=o;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"02f1":function(e,t,a){},"06d7":function(e,t,a){"use strict";var i=a("fa5c"),s=a.n(i);s.a},"20bd":function(e,t,a){},"27bb":function(e,t,a){"use strict";var i=a("e1f0"),s=a.n(i);s.a},3112:function(e,t,a){},"337b":function(e,t,a){},"3c15":function(e,t,a){"use strict";var i=a("8ebc"),s=a.n(i);s.a},"56d7":function(e,t,a){"use strict";a.r(t);a("3a0f"),a("a3a3"),a("4d0b");var i=a("329b"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("Layout",[a("Header",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.navShow,expression:"$store.state.navShow"}],staticStyle:{padding:"unset"}},[a("Menu",{attrs:{"active-name":e.$store.state.navIndex,mode:"horizontal",theme:e.menu_theme},on:{"on-select":e.handleSelect}},[a("MenuItem",{attrs:{name:e.$store.state.home}},[e._v(e._s(e.$store.state.home))]),a("MenuItem",{attrs:{name:e.$store.state.device}},[e._v(e._s(e.$store.state.device))]),a("MenuItem",{attrs:{name:e.$store.state.targetApp}},[e._v(e._s(e.$store.state.targetApp))]),a("MenuItem",{attrs:{name:e.$store.state.wrapper}},[e._v(e._s(e.$store.state.wrapper))])],1)],1),a("Content",[a("transition",{attrs:{name:"slide-fade"}},[a("router-view")],1)],1)],1)],1)},n=[],r={name:"App",data:function(){return{menu_theme:"light"}},methods:{handleSelect:function(e){this.$router.push(e)}}},l=r,o=(a("5c0b"),a("048f")),c=Object(o["a"])(l,s,n,!1,null,null,null);c.options.__file="App.vue";var p=c.exports,d=(a("20a2"),a("25d7"),a("dc2a"),a("cf54"),a("b8e5")),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",{staticClass:"home-title"},[e._v(e._s(e.$store.state.projectName))]),a("Row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{attrs:{span:6}},[a("div",{staticClass:"home-list"},[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{span:12}},[a("div",{staticClass:"home-list-item home-list-item1"},[a("a",{attrs:{target:"_blank",href:"https://gitee.com/virjar/hermes"}},[e._v("Hermes主页")])])]),a("Col",{attrs:{span:12}},[a("div",{staticClass:"home-list-item home-list-item2",on:{click:function(t){e.routerPush(e.$store.state.devicePath)}}},[e._v(e._s(e.$store.state.device)+"\n                        ")])])],1),a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{span:12}},[a("div",{staticClass:"home-list-item home-list-item3",on:{click:function(t){e.routerPush(e.$store.state.targetAppPath)}}},[e._v(e._s(e.$store.state.targetApp)+"\n                        ")])]),a("Col",{attrs:{span:12}},[a("div",{staticClass:"home-list-item home-list-item4",on:{click:function(t){e.routerPush(e.$store.state.wrapperPath)}}},[e._v(e._s(e.$store.state.wrapper)+"\n                        ")])])],1)],1)])],1)],1)},v=[],g={name:"Home",data:function(){return{}},methods:{routerPush:function(e){this.$router.push(e)}}},h=g,f=(a("73cd"),Object(o["a"])(h,u,v,!1,null,"d0e03520",null));f.options.__file="Home.vue";var m=f.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._v("\n    设备列表，这里展示所有注册到系统的Android设备，你可以对设备进行上线下线，以及选择某些服务在执行的设备上面安装。\n    "),a("div",{staticClass:"block"},[a("Table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,columns:e.tableHeaders,border:""}},[e.loading?a("Spin",{attrs:{size:"large",fix:""}}):e._e()],1),e.total>0?a("Page",{attrs:{total:e.total,"show-total":"","page-size":e.pageSize,current:e.currentPage},on:{"on-change":e.getList}}):e._e()],1)])},P=[],_={name:"Device",methods:{enable:function(e,t){var a=this;this.$request.device.setEnable({deviceId:e.id,status:t},function(i){a.$request.isRequestSuccess(i)?(a.$Message.info("状态修改成功"),e.status=t):a.$Message.warning("修改失败，请稍后重试！")})},getList:function(e){console.log("get page:"+e),this.loading=!0;var t=this.$data,a=this;this.$request.device.getList({page:e-1,size:t.pageSize},function(i){if(a.loading=!1,a.$request.isRequestSuccess(i)){var s=i.data.data;t.tableData=a.$lodash.cloneDeep(s.content),t.pageSize=s.size,0===t.tableData.length?(a.$Message.info("没有查询到数据"),t.currentPage=1,t.total=0):(t.currentPage=e,t.total=s.totalElements)}else a.$Message.error("请求失败，请稍后重试")})}},mounted:function(){this.$route.params.page&&(this.$data.currentPage=this.$route.params.page),this.getList(this.$data.currentPage)},filters:{booleanTransferFilter:function(e){return e?"启用":"禁用"}},data:function(){var e=this;return{currentPage:1,total:0,pageSize:10,loading:!1,tableData:[],tableHeaders:[{title:"id",key:"id"},{title:"mac",key:"mac"},{title:"ip",key:"ip"},{title:"port",key:"port"},{title:"brand",key:"brand"},{title:"systemVersion",key:"systemVersion"},{title:"status",key:"status"},{title:"Action",key:"action",fixed:"right",width:120,render:function(t,a){var i=a.row.status?"offline":"online";return t("div",[t("Button",{props:{type:"text",size:"small"},on:{click:function(){e.enable(a.row,!a.row.status)}}},i),t("Button",{props:{type:"text",size:"small"},on:{click:function(){e.$router.push({name:e.$store.state.deviceDetail,params:a.row})}}},"Detail")])}}]}}},w=_,$=(a("840e"),Object(o["a"])(w,b,P,!1,null,"0ccf3204",null));$.options.__file="Device.vue";var S=$.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[e._v("App列表")]),a("p",[e._v("\n        这里列出所有的目标apk，如微视，微信等将要被破解的app，一个抓取需求上线，需要先在这里上传对应的app文件\n    ")]),a("div",{staticStyle:{"margin-top":"2em"}}),a("Button",{attrs:{type:"primary"},on:{click:function(t){e.modal.show=!0}}},[e._v("点击上传新的TargetApk")]),a("Modal",{attrs:{title:"上传targetAPK",width:"30%"},model:{value:e.modal.show,callback:function(t){e.$set(e.modal,"show",t)},expression:"modal.show"}},[a("Upload",{attrs:{action:"/hermes/targetApp/upload",name:"targetAPK",type:"drag",drag:"",accept:"application/vnd.android.package-archive","on-success":e.onApkUploadSuccess}},[a("div",{staticStyle:{padding:"20px 0"}},[a("i",{staticClass:"el-icon-upload",staticStyle:{"font-size":"52px",color:"#3399ff"}}),a("p",[e._v("选择/拖拽 apk 文件上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传apk文件，且不超过500M")])])]),a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:e.handleUploadDialogClosed}},[e._v("完成")])],1)],1),a("div",{staticClass:"block"},[a("Table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,columns:e.dataColumns,border:""}},[e.loading?a("Spin",{attrs:{size:"large",fix:""}}):e._e()],1),e.total>0?a("Page",{attrs:{total:e.total,"page-size":e.pageSize,"show-total":"",current:e.currentPage},on:{"on-change":e.getList}}):e._e()],1)],1)},k=[],D={name:"targetApp",methods:{setTargetAppStatus:function(e,t){var a=this;this.$request.targetApp.setEnable({targetAppId:e.id,status:t},function(i){a.$request.isRequestSuccess(i)?(a.$Message.info("状态修改成功"),e.enabled=t):a.$Message.warning("修改失败，请稍后重试！")})},handleUploadDialogClosed:function(){this.$data.modal.show=!1;var e=this.$data;this.getList(e.currentPage)},onApkUploadSuccess:function(e,t,a){0!==e.status&&(this.$Message.error(e.message),t.status="fail",a.splice(a.indexOf(t),1))},getList:function(e){this.loading=!0;var t=this,a=this.$data;this.$request.targetApp.getList({page:e-1,size:a.pageSize},function(i){if(t.loading=!1,t.$request.isRequestSuccess(i)){var s=i.data.data;a.tableData=t.$lodash.cloneDeep(s.content),a.pageSize=s.size,0===a.tableData.length?(t.$Message.warning("没有查询到数据"),a.currentPage=1,a.total=0):(a.currentPage=e,a.total=s.totalElements)}else t.$Message.error("请求失败，请稍后重试")})}},mounted:function(){this.$route.params.page&&(this.$data.currentPage=this.$route.params.page),this.getList(this.$data.currentPage)},data:function(){var e=this;return{currentPage:1,total:0,pageSize:10,loading:!1,tableData:[],modal:{show:!1},dataColumns:[{title:"appPackage",key:"appPackage"},{title:"version",key:"version"},{title:"versionCode",key:"versionCode"},{title:"downloadUrl",key:"downloadUrl"},{title:"enabled",key:"enabled"},{title:"Action",key:"action",fixed:"right",width:120,render:function(t,a){var i=a.row.enabled?"offline":"online";return t("div",[t("Button",{props:{type:"text",size:"small"},on:{click:function(){e.setTargetAppStatus(a.row,!a.row.enabled)}}},i),t("Button",{props:{type:"text",size:"small"},on:{click:function(){e.$router.push({name:e.$store.state.targetAppDetail,params:a.row})}}},"Detail")])}}]}}},A=D,C=(a("6377"),Object(o["a"])(A,y,k,!1,null,"ea07bb9e",null));C.options.__file="TargetApp.vue";var M=C.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[e._v("Wrapper列表")]),a("p",[e._v("\n        wrapper，wrapper是对于某些需要破解对apk实现的破解逻辑代码，wrapper需要符合hermes定义的接口规范。对于同一个wrapper，如果发生更新，需要升级apk的版本号码\n    ")]),a("div",{staticStyle:{"margin-top":"2em"}}),a("Button",{attrs:{type:"primary"},on:{click:function(t){e.modal.show=!0}}},[e._v("点击上传新的WrapperApk")]),a("Modal",{attrs:{title:"上传wrapperAPK",width:"30%"},model:{value:e.modal.show,callback:function(t){e.$set(e.modal,"show",t)},expression:"modal.show"}},[a("Upload",{attrs:{action:"/hermes/wrapperApp/upload",type:"drag",name:"agentAPK","on-success":e.onApkUploadSuccess,accept:"application/vnd.android.package-archive"}},[a("div",{staticStyle:{padding:"20px 0"}},[a("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),a("p",[e._v("选择/拖拽 apk 文件上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传apk文件，且不超过500M")])],1)]),a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:e.handleUploadDialogClosed}},[e._v("完成")])],1)],1),a("div",{staticClass:"block"},[a("Table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,columns:e.dataColumns,border:""}},[e.loading?a("Spin",{attrs:{size:"large",fix:""}}):e._e()],1),e.total>0?a("Page",{attrs:{total:e.total,"page-size":e.pageSize,"show-total":"",current:e.currentPage},on:{"on-change":e.getList}}):e._e()],1)],1)},q=[],T={name:"Wrapper",methods:{handleUploadDialogClosed:function(){this.$data.modal.show=!1,this.getList(currentPage)},enable:function(e,t){var a=this;this.$request.wrapper.setEnable({wrapperId:e.id,status:t},function(i){a.$request.isRequestSuccess(i)?(a.$Message.info("状态修改成功"),e.enabled=t):a.$Message.error("修改失败，请稍后重试！")})},download:function(e){this.$request.wrapper.download({apkId:e.id},function(e){console.log(e)})},onApkUploadSuccess:function(e,t,a){0!==e.status&&(this.$Message.error(e.message),t.status="fail",a.splice(a.indexOf(t),1))},getList:function(e){this.loading=!0;var t=this,a=this.$data;this.$request.wrapper.getList({page:e-1,size:a.pageSize},function(i){if(t.loading=!1,t.$request.isRequestSuccess(i)){var s=i.data.data;a.tableData=t.$lodash.cloneDeep(s.content),a.pageSize=s.size,0===a.tableData.length?(t.$Message.warning("没有查询到数据"),a.currentPage=1,a.total=0):(a.currentPage=e,a.total=s.totalElements)}else t.$Message.error("请求失败，请稍后重试")})}},mounted:function(){this.getList(1)},filters:{booleanTransferFilter:function(e){return e?"启用":"禁用"}},data:function(){var e=this;return{currentPage:1,total:0,pageSize:10,loading:!1,tableData:[],agentAPK:"",modal:{show:!1},dataColumns:[{title:"wrapperPackage",key:"apkPackage"},{title:"targetApkPackage",key:"targetApkPackage"},{title:"version",key:"version"},{title:"versionCode",key:"versionCode"},{title:"downloadUrl",key:"downloadUrl"},{title:"status",key:"enabled"},{title:"Action",key:"action",fixed:"right",width:120,render:function(t,a){var i=a.row.enabled?"offline":"online";return t("div",[t("Button",{props:{type:"text",size:"small"},on:{click:function(){e.enable(a.row,!a.row.enabled)}}},i)])}}]}}},x=T,L=(a("06d7"),Object(o["a"])(x,z,q,!1,null,"7c1f0cc2",null));L.options.__file="Wrapper.vue";var R=L.exports,O=a("f2de"),I=a("c1f9"),U=a.n(I),E={firstLetterLower:function(e){return e.substring(0,1).toLowerCase()+e.substring(1)}},W={home:"Home",device:"Device",targetApp:"TargetApp",wrapper:"Wrapper",deviceDetail:"DeviceDetail",targetAppDetail:"targetAppDetail"},B={};U.a.keys(W).forEach(function(e){B[e+"Path"]=E.firstLetterLower(W[e])});var j=U.a.assign(W,B),H=U.a.assign({projectName:"Hermes"},j),V={config:H,util:E};i["default"].use(O["a"]);var F=new O["a"].Store({state:U.a.assign({navShow:!1,navIndex:V.config.home,paramMap:{}},V.config),mutations:{navShowSwitch:function(e,t){e.navShow=t.navShow},navTabSwitch:function(e,t){e.navIndex=t.index},REFRESHPARAM:function(e,t){i["default"].set(e.paramMap,t.key,t.value)}}}),K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"block"},[a("div",[a("Row",[a("Col",[a("div",[e._v("Device Detail DashBoard")])])],1),a("Divider"),a("Row",[a("Col",{attrs:{span:"4"}},[e._v("deviceId")]),a("Col",{attrs:{span:"4"}},[e._v("mac")]),a("Col",{attrs:{span:"4"}},[e._v("ip")]),a("Col",{attrs:{span:"4"}},[e._v("port")]),a("Col",{attrs:{span:"4"}},[e._v("visibleIp")]),a("Col",{attrs:{span:"4"}},[e._v("status")])],1),a("Row",[a("Col",{attrs:{span:"4"}},[e._v(e._s(e.deviceModel.id))]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.deviceModel.mac))]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.deviceModel.ip))]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.deviceModel.port))]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.deviceModel.visibleIp))]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.deviceModel.status))])],1),a("Divider",{attrs:{dashed:""}}),a("Row",[a("Col",{attrs:{span:"4"}},[e._v("brand")]),a("Col",{attrs:{span:"4"}},[e._v("systemVersion")]),a("Col",{attrs:{span:"4"}},[e._v("cpuUsage")]),a("Col",{attrs:{span:"4"}},[e._v("memoryInfo")]),a("Col",{attrs:{span:"4"}},[e._v("lastReportTime")])],1),a("Row",[a("Col",{attrs:{span:"4"}},[e._v(e._s(e.deviceModel.brand))]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.deviceModel.systemVersion))]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.deviceModel.cpuUsage)+"%")]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.deviceModel.memory)+"%")]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.deviceModel.lastReportTime))])],1),a("Divider",{attrs:{dashed:""}})],1)]),a("div",{staticClass:"block"},[a("Tabs",[a("TabPane",{attrs:{label:"Installed Service"}},[a("Table",{ref:"installedServiceSelection",staticStyle:{width:"100%"},attrs:{data:e.installedServiceData,columns:e.installedServiceTableHeaders,loading:e.installedPage.loading,border:""}}),e.installedPage.total>0?a("Page",{attrs:{total:e.installedPage.total,"page-size":e.installedPage.pageSize,"show-total":"",current:e.installedPage.currentPage},on:{"on-change":e.getInstalledList}}):e._e()],1),a("TabPane",{attrs:{label:"Available Service"}},[a("Table",{ref:"availableServiceSelection",staticStyle:{width:"100%"},attrs:{data:e.availableServiceData,columns:e.availableServiceTableHeaders,loading:e.availablePage.loading,border:""}}),e.availablePage.total>0?a("Page",{attrs:{total:e.availablePage.total,"page-size":e.availablePage.pageSize,"show-total":"",current:e.availablePage.currentPage},on:{"on-change":e.getAvailableList}}):e._e(),a("Row",[a("Col",{attrs:{span:"2"}},[a("Button",{on:{click:function(t){e.installService(!1)}}},[e._v("install selected service")])],1),a("Col",{attrs:{span:"2"}},[a("Button",{on:{click:function(t){e.installService(!0)}}},[e._v("install all service(danger)")])],1)],1)],1),a("TabPane",{attrs:{label:"Online Service"}},[a("ul",e._l(e.onlineServices,function(t){return a("li",[e._v("\n                        "+e._s(t)+"\n                    ")])}))]),a("TabPane",{attrs:{label:"Hermes Log"}},[e._v("display device running log (TODO)")]),a("TabPane",{attrs:{label:"Device Terminal"}},[e._v("a shell that connected to this device(TODO)")]),a("TabPane",{attrs:{label:"Debugger"}},[e._v("i give you a debugger,so you can test invoke api on this device(TODO)\n            ")])],1)],1)])},N=[],J={name:"DeviceDetail",methods:{getInstalledList:function(e){this.availablePage.loading=!0;var t=this,a=this.$data;this.$request.targetApp.getList(t.$lodash.assign({page:a.installedPage.currentPage-1,size:a.installedPage.pageSize,mac:t.$data.deviceModel.mac},t.$data.params),function(i){if(t.installedPage.loading=!1,t.$request.isRequestSuccess(i)){var s=i.data.data;a.installedServiceData=t.$lodash.cloneDeep(s.content),a.installedPage.pageSize=s.size,a.installedPage.currentPage=e,a.installedPage.total=s.totalElements}else t.$Message.error("请求失败，请稍后重试")})},getAvailableList:function(e){this.availablePage.loading=!0;var t=this,a=this.$data;this.$request.targetApp.getAvailableService(t.$lodash.assign({page:a.availablePage.currentPage-1,size:a.availablePage.pageSize,mac:t.$data.deviceModel.mac},t.$data.params),function(i){if(t.availablePage.loading=!1,t.$request.isRequestSuccess(i)){var s=i.data.data;a.availableServiceData=t.$lodash.cloneDeep(s.content),a.availablePage.pageSize=s.size,a.availablePage.currentPage=e,a.availablePage.total=s.totalElements}else t.$Message.error("请求失败，请稍后重试")})},installOneService:function(e,t){var a=this;t||(t=!1),a.$request.deviceService.installOne({deviceMac:this.$data.deviceModel.mac,targetService:e.appPackage,enabled:t},function(i){e.__is_installing=!1,a.$request.isRequestSuccess(i)?(a.$Message.info(t?"install success":"uninstall success"),a.getInstalledList(a.$data.installedPage.currentPage),a.getAvailableList(a.$data.availablePage.currentPage)):a.$Message.error("请求失败，请稍后重试")})},installService:function(e){var t=this;if(0!==t.$data.availablePage.total){var a=function(e){t.$request.isRequestSuccess(e)?(t.$Message.info("install success"),t.getInstalledList(t.$data.installedPage.currentPage),t.getAvailableList(t.$data.availablePage.currentPage)):t.$Message.error("请求失败，请稍后重试")};if(e)this.$Message.warning({content:"you are install all service on this device ,this maybe caused hi load for device",duration:10}),t.$request.deviceService.deployAllService({deviceMac:t.$data.deviceModel.mac},a);else{if(0===t.$refs.availableServiceSelection.getSelection().length)return void t.$Message.error("please select some service");t.$request.deviceService.installServiceForDevice({deviceMac:t.$data.deviceModel.mac,targetServiceList:t.$refs.availableServiceSelection.getSelection().map(function(e){return e.appPackage})},a)}}else t.$Message.error("there is no available service for install")}},mounted:function(){var e=this;if(this.$data.deviceModel&&this.$data.deviceModel.id||(this.$data.deviceModel=this.$route.params),!this.$data.deviceModel||!this.$data.deviceModel.id)return this.$Message.error("you can not access this page direct"),void setTimeout(function(){e.$router.push({name:e.$store.state.device})},1400);this.onlineServices=JSON.parse(this.deviceModel["lastReportService"]),0===this.onlineServices.length&&(this.onlineServices=["no available service"]),this.getInstalledList(1),this.getAvailableList(1)},data:function(){var e=this;return{deviceModel:{},installedServiceTableHeaders:[{type:"selection",width:60,align:"center"},{title:"id",key:"id"},{title:"appPackage",key:"appPackage"},{title:"version",key:"version"},{title:"versionCode",key:"versionCode"},{title:"downloadUrl",key:"downloadUrl"},{title:"Action",key:"action",fixed:"right",width:120,render:function(t,a){return t("div",[t("Button",{props:{type:"text",size:"small"},on:{click:function(){a.row.__is_installing||(a.row.__is_installing=!0,e.installOneService(a.row,!1))}}},"UnInstall"),t("Button",{props:{type:"text",size:"small"},on:{click:function(){e.$router.push({name:e.$store.state.targetAppDetail,params:a.row})}}},"Detail")])}}],installedServiceData:[],installedPage:{currentPage:1,total:0,pageSize:10,loading:!1,lastPage:0},availableServiceTableHeaders:[{type:"selection",width:60,align:"center"},{title:"id",key:"id"},{title:"appPackage",key:"appPackage"},{title:"version",key:"version"},{title:"versionCode",key:"versionCode"},{title:"downloadUrl",key:"downloadUrl"},{title:"Action",key:"action",fixed:"right",width:120,render:function(t,a){return t("div",[t("Button",{props:{type:"text",size:"small"},on:{click:function(){a.row.__is_installing||(a.row.__is_installing=!0,e.installOneService(a.row,!0))}}},"Install"),t("Button",{props:{type:"text",size:"small"},on:{click:function(){e.$router.push({name:e.$store.state.targetAppDetail,params:a.row})}}},"Detail")])}}],availableServiceData:[],availablePage:{currentPage:1,total:0,pageSize:10,loading:!1,lastPage:0},onlineServices:[]}}},Q=J,G=(a("3c15"),Object(o["a"])(Q,K,N,!1,null,"132decf1",null));G.options.__file="DeviceDetail.vue";var X=G.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"block"},[a("div",[a("Row",[a("Col",[a("div",[e._v("Target APP Detail DashBoard")])])],1),a("Divider"),a("Row",[a("Col",{attrs:{span:"4"}},[e._v("id")]),a("Col",{attrs:{span:"4"}},[e._v("APP Name")]),a("Col",{attrs:{span:"4"}},[e._v("APP package")]),a("Col",{attrs:{span:"4"}},[e._v("status")]),a("Col",{attrs:{span:"8"}},[e._v("downloadUrl")])],1),a("Row",[a("Col",{attrs:{span:"4"}},[e._v(e._s(e.targetAppModel.id))]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.targetAppModel.name))]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.targetAppModel.appPackage))]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.targetAppModel.enabled))]),a("Col",{attrs:{span:"8"}},[e._v(e._s(e.targetAppModel.downloadUrl))])],1),a("Divider",{attrs:{dashed:""}}),a("Row",[a("Col",{attrs:{span:"4"}},[e._v("Icon")]),a("Col",{attrs:{span:"4"}},[e._v("version")]),a("Col",{attrs:{span:"4"}},[e._v("versionCode")]),a("Col",{attrs:{span:"4"}},[e._v("savePath")])],1),a("Row",[a("Col",{attrs:{span:"4"}},[e._v("TODO")]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.targetAppModel.version))]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.targetAppModel.versionCode))]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.targetAppModel.savePath))])],1),a("Divider",{attrs:{dashed:""}}),a("Row",[a("Col",{attrs:{span:"4"}},[e._v("UsedWrapperPackage")]),a("Col",{attrs:{span:"4"}},[e._v("UsedWrapperVersion")]),a("Col",{attrs:{span:"4"}},[e._v("UsedWrapperVersionCode")]),a("Col",{attrs:{span:"4"}},[e._v("UsedWrapperDownloadUrl")])],1),e.presented?a("Row",[a("Col",{attrs:{span:"4"}},[e._v(e._s(e.usedWrapper.apkPackage))]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.usedWrapper.version))]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.usedWrapper.versionCode))]),a("Col",{attrs:{span:"4"}},[e._v(e._s(e.usedWrapper.downloadUrl))])],1):e._e(),a("Divider",{attrs:{dashed:""}})],1)]),a("div",{staticClass:"block"},[a("Tabs",[a("TabPane",{attrs:{label:"Available Device"}},[a("Table",{ref:"availableDeviceSelection",staticStyle:{width:"100%"},attrs:{data:e.availableDeviceData,columns:e.availableDeviceTableHeaders,loading:e.availableDevicePage.loading,border:""}}),e.availableDevicePage.total>0?a("Page",{attrs:{total:e.availableDevicePage.total,"page-size":e.availableDevicePage.pageSize,"show-total":"",current:e.availableDevicePage.currentPage},on:{"on-change":e.getAvailableList}}):e._e()],1),a("TabPane",{attrs:{label:"Installed Device"}},[a("Table",{ref:"installedDeviceSelection",staticStyle:{width:"100%"},attrs:{data:e.installedDeviceData,columns:e.installedDeviceTableHeaders,loading:e.installedDevicePage.loading,border:""}}),e.installedDevicePage.total>0?a("Page",{attrs:{total:e.installedDevicePage.total,"page-size":e.installedDevicePage.pageSize,"show-total":"",current:e.installedDevicePage.currentPage},on:{"on-change":e.getInstalledList}}):e._e()],1),a("TabPane",{attrs:{label:"Online devices"}},[a("Table",{staticStyle:{width:"100%"},attrs:{data:e.onlineDevices,columns:e.onlineDeviceColumn,border:""}})],1),a("TabPane",{attrs:{label:"App Wrappers"}},[a("Table",{staticStyle:{width:"100%"},attrs:{data:e.wrapperApkData,columns:e.wrapperTableHeaders,loading:e.wrapperPage.loading,border:""}}),e.wrapperPage.total>0?a("Page",{attrs:{total:e.wrapperPage.total,"page-size":e.wrapperPage.pageSize,"show-total":"",current:e.wrapperPage.currentPage},on:{"on-change":e.getWrapperList}}):e._e()],1)],1)],1)])},Z=[],ee={name:"targetAppDetail",methods:{getInstalledList:function(e){this.installedDevicePage.loading=!0;var t=this,a=this.$data;this.$request.device.getList(t.$lodash.assign({page:a.installedDevicePage.currentPage-1,size:a.installedDevicePage.pageSize,appPackage:t.$data.targetAppModel.appPackage},t.$data.params),function(i){if(t.installedDevicePage.loading=!1,t.$request.isRequestSuccess(i)){var s=i.data.data;a.installedDeviceData=t.$lodash.cloneDeep(s.content),a.installedDevicePage.pageSize=s.size,a.installedDevicePage.currentPage=e,a.installedDevicePage.total=s.totalElements}else t.$Message.error("请求失败，请稍后重试")})},getAvailableList:function(e){this.availableDevicePage.loading=!0;var t=this,a=this.$data;this.$request.device.getAvailableDevice({page:a.availableDevicePage.currentPage-1,size:a.availableDevicePage.pageSize,appPackage:t.$data.targetAppModel.appPackage},function(i){if(t.availableDevicePage.loading=!1,t.$request.isRequestSuccess(i)){var s=i.data.data;a.availableDeviceData=t.$lodash.cloneDeep(s.content),a.availableDevicePage.pageSize=s.size,a.availableDevicePage.currentPage=e,a.availableDevicePage.total=s.totalElements}else t.$Message.error("请求失败，请稍后重试")})},getWrapperList:function(e){this.wrapperPage.loading=!0;var t=this,a=this.$data;this.$request.wrapper.getList({page:a.wrapperPage.currentPage-1,size:a.wrapperPage.pageSize,targetAppPackage:t.$data.targetAppModel.appPackage},function(i){if(t.wrapperPage.loading=!1,t.$request.isRequestSuccess(i)){var s=i.data.data;a.wrapperApkData=t.$lodash.cloneDeep(s.content),a.wrapperPage.pageSize=s.size,a.wrapperPage.currentPage=e,a.wrapperPage.total=s.totalElements}else t.$Message.error("请求失败，请稍后重试")})},queryUsedWrapper:function(){var e=this,t=this.$data.targetAppModel.appPackage;this.$request.wrapper.queryUsed({targetPackage:t},function(t){e.$request.isRequestSuccess(t)?(e.$data.usedWrapper=t.data.data,e.presented=!0):e.presented=!1})},queryOnlineDevices:function(){var e=this,t=this.$data.targetAppModel.appPackage;this.$request.targetApp.queryQueueStatus({servicePackage:t},function(t){e.$request.isRequestSuccess(t)?(e.$data.onlineDevices=t.data.data,e.presented=!0):e.presented=!1})},installOneService:function(e,t){var a=this;t||(t=!1),a.$request.deviceService.installOne({deviceMac:e.mac,targetService:this.$data.targetAppModel.appPackage,enabled:t},function(i){e.__is_installing=!1,a.$request.isRequestSuccess(i)?(a.$Message.info(t?"install success":"uninstall success"),a.getInstalledList(a.$data.installedDevicePage.currentPage),a.getAvailableList(a.$data.availableDevicePage.currentPage)):a.$Message.error("请求失败，请稍后重试")})},enable:function(e,t){var a=this;this.$request.wrapper.setEnable({wrapperId:e.id,status:t},function(i){a.$request.isRequestSuccess(i)?(a.queryUsedWrapper(),a.$Message.info("状态修改成功"),e.enabled=t):a.$Message.error("修改失败，请稍后重试！")})}},mounted:function(){var e=this;if(this.$data.targetAppModel&&this.$data.targetAppModel.id||(this.$data.targetAppModel=this.$route.params),!this.$data.targetAppModel||!this.$data.targetAppModel.id)return this.$Message.error("you can not access this page direct"),void setTimeout(function(){e.$router.push({name:e.$store.state.targetApp})},1400);this.getInstalledList(1),this.getAvailableList(1),this.getWrapperList(1),this.queryUsedWrapper(),this.queryOnlineDevices()},data:function(){var e=this;return{targetAppModel:{},availableDeviceData:[],installedDevicePage:{loading:!1,total:0,pageSize:10,currentPage:1},installedDeviceData:[],installedDeviceTableHeaders:[{type:"selection",width:60,align:"center"},{title:"id",key:"id"},{title:"ip",key:"ip"},{title:"visibleIp",key:"visibleIp"},{title:"port",key:"port"},{title:"mac",key:"mac"},{title:"brand",key:"brand"},{title:"systemVersion",key:"systemVersion"},{title:"Action",key:"action",fixed:"right",width:120,render:function(t,a){return t("div",[t("Button",{props:{type:"text",size:"small"},on:{click:function(){a.row.__is_installing||(a.row.__is_installing=!0,e.installOneService(a.row,!1))}}},"UnInstall"),t("Button",{props:{type:"text",size:"small"},on:{click:function(){e.$router.push({name:e.$store.state.deviceDetail,params:a.row})}}},"Detail")])}}],availableDevicePage:{loading:!1,total:0,pageSize:10,currentPage:1},availableDeviceTableHeaders:[{type:"selection",width:60,align:"center"},{title:"id",key:"id"},{title:"ip",key:"ip"},{title:"visibleIp",key:"visibleIp"},{title:"port",key:"port"},{title:"mac",key:"mac"},{title:"brand",key:"brand"},{title:"systemVersion",key:"systemVersion"},{title:"Action",key:"action",fixed:"right",width:120,render:function(t,a){return t("div",[t("Button",{props:{type:"text",size:"small"},on:{click:function(){a.row.__is_installing||(a.row.__is_installing=!0,e.installOneService(a.row,!0))}}},"Install"),t("Button",{props:{type:"text",size:"small"},on:{click:function(){e.$router.push({name:e.$store.state.deviceDetail,params:a.row})}}},"Detail")])}}],wrapperApkData:[],wrapperPage:{loading:!1,total:0,pageSize:10,currentPage:1},wrapperTableHeaders:[{title:"wrapperPackage",key:"apkPackage"},{title:"targetApkPackage",key:"targetApkPackage"},{title:"version",key:"version"},{title:"versionCode",key:"versionCode"},{title:"downloadUrl",key:"downloadUrl"},{title:"status",key:"enabled"},{title:"Action",key:"action",fixed:"right",width:120,render:function(t,a){var i=a.row.enabled?"offline":"online";return t("div",[t("Button",{props:{type:"text",size:"small"},on:{click:function(){e.enable(a.row,!a.row.enabled)}}},i)])}}],usedWrapper:{},presented:!1,onlineDevices:[],onlineDeviceColumn:[{title:"ip",key:"ip"},{title:"port",key:"port"},{title:"mac",key:"mac"},{title:"score",key:"score"},{title:"lastReportTime",key:"lastReportTime"}]}}},te=ee,ae=(a("27bb"),Object(o["a"])(te,Y,Z,!1,null,"62174d3a",null));ae.options.__file="TargetAppDetail.vue";var ie=ae.exports,se=V.config;i["default"].use(d["a"]);var ne=new d["a"]({routes:[{path:"/",redirect:"/"+se.homePath},{path:"/"+se.homePath,name:se.home,component:m},{path:"/"+se.devicePath,name:se.device,component:S},{path:"/"+se.targetAppPath,name:se.targetApp,component:M},{path:"/"+se.wrapperPath,name:se.wrapper,component:R},{path:"/"+se.deviceDetailPath,name:se.deviceDetail,component:X},{path:"/"+se.targetAppDetailPath,name:se.targetAppDetail,component:ie}]});ne.beforeEach(function(e,t,a){F.commit("navShowSwitch",{navShow:e.name!==se.home}),F.commit("navTabSwitch",{index:e.name}),0===Object.keys(e.params).length&&Object.assign(e.params,F.state.paramMap[e.name]||{}),F.commit("REFRESHPARAM",{key:e.name,value:e.params}),a()});var re=ne,le=a("b45a"),oe=a.n(le),ce=(a("0932"),a("20bd"),a("7f43")),pe=a.n(ce),de=function(e,t){pe.a.get("/hermes/device/list",{params:e}).then(function(e){t(U.a.cloneDeep(e))}).catch(function(e){t(e)})},ue=function(e,t){pe.a.get("/hermes/device/setStatus",{params:e}).then(function(e){t(U.a.cloneDeep(e))}).catch(function(e){t(e)})},ve=function(e,t){pe.a.get("/hermes/device/listAvailableDevice",{params:e}).then(function(e){t(U.a.cloneDeep(e))}).catch(function(e){t(e)})},ge={getList:de,setEnable:ue,getAvailableDevice:ve},he=a("0e4f"),fe=a.n(he),me=function(e,t){pe.a.get("/hermes/service/list",{params:e}).then(function(e){t(U.a.cloneDeep(e))}).catch(function(e){t(e)})},be=function(e,t){pe.a.get("/hermes/service/deployAllService",{params:e}).then(function(e){t(U.a.cloneDeep(e))}).catch(function(e){t(e)})},Pe=function(e,t){pe.a.get("/hermes/service/installOne",{params:e}).then(function(e){t(U.a.cloneDeep(e))}).catch(function(e){t(e)})},_e=function(e,t){pe.a.get("/hermes/service/installServiceForDevice",{params:e,paramsSerializer:function(e){return fe.a.stringify(e,{indices:!1})}}).then(function(e){t(U.a.cloneDeep(e))}).catch(function(e){t(e)})},we={getList:me,deployAllService:be,installOne:Pe,installServiceForDevice:_e},$e=function(e,t){pe.a.get("/hermes/targetApp/list",{params:e}).then(function(e){t(U.a.cloneDeep(e))}).catch(function(e){t(e)})},Se=function(e,t){pe.a.get("/hermes/targetApp/download",{params:e}).then(function(e){t(U.a.cloneDeep(e))}).catch(function(e){t(e)})},ye=function(e,t){pe.a.get("/hermes/targetApp/listAvailableService",{params:e}).then(function(e){t(U.a.cloneDeep(e))}).catch(function(e){t(e)})},ke=function(e,t){pe.a.get("/hermes/targetApp/setStatus",{params:e}).then(function(e){t(U.a.cloneDeep(e))}).catch(function(e){t(e)})},De=function(e,t){pe.a.get("/hermes/queue/queueStatus",{params:e}).then(function(e){t(U.a.cloneDeep(e))}).catch(function(e){t(e)})},Ae={getList:$e,download:Se,getAvailableService:ye,setEnable:ke,queryQueueStatus:De},Ce=function(e,t){pe.a.get("/hermes/wrapperApp/list",{params:e}).then(function(e){t(U.a.cloneDeep(e))}).catch(function(e){t(e)})},Me=function(e,t){pe.a.get("/hermes/wrapperApp/download",{params:e}).then(function(e){t(U.a.cloneDeep(e))}).catch(function(e){t(e)})},ze=function(e,t){pe.a.get("/hermes/wrapperApp/setStatus",{params:e}).then(function(e){t(U.a.cloneDeep(e))}).catch(function(e){t(e)})},qe=function(e,t){pe.a.get("/hermes/wrapperApp/usedWrapper",{params:e}).then(function(e){t(U.a.cloneDeep(e))}).catch(function(e){t(e)})},Te={getList:Ce,download:Me,setEnable:ze,queryUsed:qe},xe=function(e){return e.data&&0===e.data.status},Le={device:ge,targetApp:Ae,deviceService:we,wrapper:Te,isRequestSuccess:xe};i["default"].use(oe.a),i["default"].config.productionTip=!1,i["default"].prototype.$lodash=U.a,i["default"].prototype.$request=Le,new i["default"]({el:"#app",router:re,store:F,render:function(e){return e(p)},components:{App:p}})},"5c0b":function(e,t,a){"use strict";var i=a("337b"),s=a.n(i);s.a},6377:function(e,t,a){"use strict";var i=a("3112"),s=a.n(i);s.a},"73cd":function(e,t,a){"use strict";var i=a("02f1"),s=a.n(i);s.a},"7f71":function(e,t,a){},"840e":function(e,t,a){"use strict";var i=a("7f71"),s=a.n(i);s.a},"8ebc":function(e,t,a){},e1f0:function(e,t,a){},fa5c:function(e,t,a){}});